<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>关卡编辑器</title>
    <link rel="stylesheet" href="fontawesome.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="main.js" type="module" defer></script>
</head>

<body>
    <div id="header">
        <h1>关卡编辑器</h1>
        <div class="hint">
            <p>提示：关卡数据会自动保存。</p>
            <p><kbd>0</kbd> ~ <kbd>9</kbd> 切换工具栏，<kbd>[</kbd> 和 <kbd>]</kbd> 置底/置顶，<kbd>delete</kbd>
                删除选中元素，<kbd>Alt</kbd> 取消吸附网格，<kbd>Shift</kbd> 多选</p>
            <p><kbd>Ctrl+A</kbd> 全选，<kbd>Ctrl+C</kbd> 复制，<kbd>Ctrl+V</kbd> 粘贴，<kbd>Ctrl+Z</kbd>
                撤回，<kbd>Ctrl+Y</kbd> 重做，<kbd>Shift+拖动</kbd> 框选</p>
            <p>背景绘制模式：<kbd>1</kbd> ~ <kbd>9</kbd> 切换瓦片类型，<kbd>鼠标左键</kbd> 绘制，
                <kbd>鼠标中键</kbd> 移动，<kbd>鼠标右键</kbd> 擦除，<kbd>Q</kbd> / <kbd>E</kbd> 调整画笔大小
            </p>
        </div>
    </div>
    <canvas id="canvas"></canvas>
    <canvas id="canvas-tile-cursor"></canvas>
    <div id="vignette"></div>
    <div id="toolbar">
        <button id="pointerTool" class="tool active">
            <i class="fas fa-mouse-pointer icon"></i>
            <span>指针</span>
        </button>
        <div class="tool-separator"></div>
        <button id="platformTool" class="tool">
            <i class="fas fa-square icon"></i>
            <span>平台</span>
        </button>
        <button id="interactableTool" class="tool">
            <i class="fas fa-comment icon"></i>
            <span>互动</span>
        </button>
        <button id="movingPlatformTool" class="tool">
            <i class="fas fa-arrows-alt icon"></i>
            <span>移动平台</span>
        </button>
        <button id="levelChangerTool" class="tool">
            <i class="fas fa-door-open icon"></i>
            <span>关卡切换</span>
        </button>
        <button id="enemyTool" class="tool">
            <i class="fas fa-skull icon"></i>
            <span>敌人</span>
        </button>
        <button id="collectibleTool" class="tool">
            <i class="fas fa-gem icon"></i>
            <span>收集品</span>
        </button>
        <button id="hazardTool" class="tool">
            <i class="fas fa-exclamation-triangle icon"></i>
            <span>刺儿</span>
        </button>
        <button id="triggerTool" class="tool">
            <i class="fas fa-star icon"></i>
            <span>触发器</span>
        </button>
        <div class="tool-separator"></div>
        <button id="eraserTool" class="tool">
            <i class="fas fa-eraser icon"></i>
            <span>橡皮擦</span>
        </button>
    </div>
    <div id="propertiesPanel">
        <h3 style="display: flex; align-items: center; justify-content: space-between;">
            <span id="propertiesTitle">属性编辑器</span>
            <button id="togglePropertiesPanelBtn"
                style="background: none; border: none; cursor: pointer; padding: 0; margin-left: 8px; display: flex; align-items: center;">
                <svg id="toggleArrow" width="16" height="16" viewBox="0 0 16 16" style="transition: transform 0.2s;"
                    xmlns="http://www.w3.org/2000/svg">
                    <polyline points="4,6 8,10 12,6" fill="none" stroke="currentColor" stroke-width="2" />
                </svg>
            </button>
        </h3>
        <div id="propertiesContent"></div>
    </div>
    <div class="actions right top">
        <button id="exportBtn"><i class="fas fa-share-square"></i> <span>导出</span></button>
        <button id="playBtn"><i class="fas fa-play icon"></i> <span>播放</span></button>
        <button id="drawBgBtn"><i class="fas fa-paint-brush icon"></i> <span>绘制背景（E）</span></button>
    </div>
    <div class="actions right bottom">
        <select id="levelSelect">
            <option value="">新建关卡...</option>
        </select>
        <button id="renameLevelBtn" class="level-action-btn rename-btn" title="重命名关卡">
            <i class="fas fa-edit"></i>
        </button>
        <button id="deleteLevelBtn" class="level-action-btn delete-btn" title="删除关卡">
            <i class="fas fa-trash"></i>
        </button>
    </div>
    <div class="left bottom" id="information">
        准备加载瓦片...
    </div>
</body>

</html>